os:
 - linux
 - osx
 - windows

language: go

go: "1.12.x"

go_import_path: github.com/dcos/dcos-core-cli

env:
 - NO_DOCKER=1 GO111MODULE=on

before_install:
 - go get -u github.com/golangci/golangci-lint/cmd/golangci-lint

script: # Disable automatic make detection

jobs:
 include:
 - stage: Windows
   if: os = windows
   script:
    - mingw32-make windows
    - mingw32-make test
 - stage: Linux/OSX
   if: os != windows
   script:
    - make
    - make test
